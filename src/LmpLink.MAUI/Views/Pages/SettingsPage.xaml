<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:LmpLink.MAUI.ViewModels"
             x:Class="LmpLink.MAUI.Views.Pages.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             Title="ì„¤ì •"
             BackgroundColor="{StaticResource BackgroundDeepNavy}">

    <ScrollView>
        <Grid Padding="20" RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="*,*" ColumnSpacing="20" RowSpacing="20">
            
            <!-- Title (Full Width) -->
            <Label 
                Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                Text="âš™ï¸ ì„¤ì •"
                Style="{StaticResource Heading1}"
                TextColor="{StaticResource PrimaryCTA}" />

            <!-- LEFT COLUMN -->
            
            <!-- Marker Settings -->
            <Frame Grid.Row="1" Grid.Column="0" BackgroundColor="{StaticResource SurfaceDarkGray}" Padding="20" CornerRadius="12">
                <VerticalStackLayout Spacing="15">
                    <Label 
                        Text="ðŸŽ¨ ë§ˆì»¤ ì„¤ì •"
                        Style="{StaticResource Heading3}"
                        TextColor="{StaticResource TextWhite}" />
                    
                    <!-- User Marker Color -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="ì´ìš©ìž ë§ˆì»¤ ìƒ‰ìƒ"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#60A5FA">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding UserMarkerColor}" Value="#60A5FA">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateUserMarkerColorCommand}" CommandParameter="#60A5FA" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#34D399">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding UserMarkerColor}" Value="#34D399">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateUserMarkerColorCommand}" CommandParameter="#34D399" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#F472B6">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding UserMarkerColor}" Value="#F472B6">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateUserMarkerColorCommand}" CommandParameter="#F472B6" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#A78BFA">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding UserMarkerColor}" Value="#A78BFA">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateUserMarkerColorCommand}" CommandParameter="#A78BFA" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#FBBF24">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding UserMarkerColor}" Value="#FBBF24">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateUserMarkerColorCommand}" CommandParameter="#FBBF24" />
                                </Border.GestureRecognizers>
                            </Border>
                        </HorizontalStackLayout>
                        <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*" ColumnSpacing="10">
                            <Label Grid.Column="0" Text="í˜„ìž¬:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" />
                            <Frame Grid.Column="1" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="#60A5FA" />
                            <Label Grid.Column="2" Text="â†’ ë¯¸ë¦¬ë³´ê¸°:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" Margin="10,0,0,0" />
                            <Frame Grid.Column="3" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="{Binding UserMarkerColor}" />
                            <Label Grid.Column="4" Text="{Binding UserMarkerColor}" Style="{StaticResource Body2}" TextColor="{StaticResource AccentSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>

                    <!-- Assistant Marker Color -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="í™œë™ì§€ì›ì‚¬ ë§ˆì»¤ ìƒ‰ìƒ"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#FB923C">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding AssistantMarkerColor}" Value="#FB923C">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateAssistantMarkerColorCommand}" CommandParameter="#FB923C" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#F87171">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding AssistantMarkerColor}" Value="#F87171">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateAssistantMarkerColorCommand}" CommandParameter="#F87171" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#FBBF24">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding AssistantMarkerColor}" Value="#FBBF24">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateAssistantMarkerColorCommand}" CommandParameter="#FBBF24" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#A78BFA">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding AssistantMarkerColor}" Value="#A78BFA">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateAssistantMarkerColorCommand}" CommandParameter="#A78BFA" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#34D399">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding AssistantMarkerColor}" Value="#34D399">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateAssistantMarkerColorCommand}" CommandParameter="#34D399" />
                                </Border.GestureRecognizers>
                            </Border>
                        </HorizontalStackLayout>
                        <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*" ColumnSpacing="10">
                            <Label Grid.Column="0" Text="í˜„ìž¬:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" />
                            <Frame Grid.Column="1" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="#FB923C" />
                            <Label Grid.Column="2" Text="â†’ ë¯¸ë¦¬ë³´ê¸°:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" Margin="10,0,0,0" />
                            <Frame Grid.Column="3" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="{Binding AssistantMarkerColor}" />
                            <Label Grid.Column="4" Text="{Binding AssistantMarkerColor}" Style="{StaticResource Body2}" TextColor="{StaticResource AccentSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>

                    <!-- Marker Size -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="ë§ˆì»¤ í¬ê¸°"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Button Text="Small" Command="{Binding UpdateMarkerSizeCommand}" CommandParameter="Small" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding MarkerSize}" Value="Small">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Medium" Command="{Binding UpdateMarkerSizeCommand}" CommandParameter="Medium" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding MarkerSize}" Value="Medium">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Large" Command="{Binding UpdateMarkerSizeCommand}" CommandParameter="Large" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding MarkerSize}" Value="Large">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Theme Settings -->
            <Frame Grid.Row="2" Grid.Column="0" BackgroundColor="{StaticResource SurfaceDarkGray}" Padding="20" CornerRadius="12">
                <VerticalStackLayout Spacing="15">
                    <Label 
                        Text="ðŸŒ™ í…Œë§ˆ ì„¤ì •"
                        Style="{StaticResource Heading3}"
                        TextColor="{StaticResource TextWhite}" />
                    
                    <!-- Dark Mode -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label 
                            Grid.Column="0"
                            Text="ë‹¤í¬ ëª¨ë“œ"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}"
                            VerticalOptions="Center" />
                        <Switch 
                            Grid.Column="1"
                            IsToggled="{Binding IsDarkMode}"
                            OnColor="{StaticResource PrimaryCTA}"
                            ThumbColor="{StaticResource TextWhite}" />
                    </Grid>

                    <!-- Font Size -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="ê¸€ê¼´ í¬ê¸°"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Button Text="Small" Command="{Binding UpdateFontSizeCommand}" CommandParameter="Small" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding FontSize}" Value="Small">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Medium" Command="{Binding UpdateFontSizeCommand}" CommandParameter="Medium" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding FontSize}" Value="Medium">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Large" Command="{Binding UpdateFontSizeCommand}" CommandParameter="Large" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding FontSize}" Value="Large">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>

                    <!-- Card Size -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="ì¹´ë“œ í¬ê¸°"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Button Text="Compact" Command="{Binding UpdateCardSizeCommand}" CommandParameter="Compact" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding CardSize}" Value="Compact">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Normal" Command="{Binding UpdateCardSizeCommand}" CommandParameter="Normal" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding CardSize}" Value="Normal">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                            <Button Text="Large" Command="{Binding UpdateCardSizeCommand}" CommandParameter="Large" BackgroundColor="{StaticResource SurfaceDarkNavy}" TextColor="{StaticResource TextWhite}" Padding="15,8" CornerRadius="6">
                                <Button.Triggers>
                                    <DataTrigger TargetType="Button" Binding="{Binding CardSize}" Value="Large">
                                        <Setter Property="BackgroundColor" Value="{StaticResource PrimaryCTA}" />
                                    </DataTrigger>
                                </Button.Triggers>
                            </Button>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- RIGHT COLUMN -->

            <!-- Circle Settings -->
            <Frame Grid.Row="1" Grid.Column="1" BackgroundColor="{StaticResource SurfaceDarkGray}" Padding="20" CornerRadius="12">
                <VerticalStackLayout Spacing="15">
                    <Label 
                        Text="ðŸ”˜ ë°˜ê²½ ì› ì„¤ì •"
                        Style="{StaticResource Heading3}"
                        TextColor="{StaticResource TextWhite}" />
                    
                    <!-- Circle Color -->
                    <VerticalStackLayout Spacing="8">
                        <Label 
                            Text="ì› ìƒ‰ìƒ"
                            Style="{StaticResource Body1}"
                            TextColor="{StaticResource TextLightGray}" />
                        <HorizontalStackLayout Spacing="10">
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#60A5FA">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding CircleColor}" Value="#60A5FA">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateCircleColorCommand}" CommandParameter="#60A5FA" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#34D399">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding CircleColor}" Value="#34D399">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateCircleColorCommand}" CommandParameter="#34D399" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#F472B6">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding CircleColor}" Value="#F472B6">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateCircleColorCommand}" CommandParameter="#F472B6" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#A78BFA">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding CircleColor}" Value="#A78BFA">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateCircleColorCommand}" CommandParameter="#A78BFA" />
                                </Border.GestureRecognizers>
                            </Border>
                            <Border WidthRequest="50" HeightRequest="50" StrokeThickness="3" BackgroundColor="#FB923C">
                                <Border.StrokeShape><RoundRectangle CornerRadius="8" /></Border.StrokeShape>
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding CircleColor}" Value="#FB923C">
                                        <Setter Property="Stroke" Value="#FBBF24" />
                                    </DataTrigger>
                                </Border.Triggers>
                                <Border.Stroke><SolidColorBrush Color="Transparent" /></Border.Stroke>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding UpdateCircleColorCommand}" CommandParameter="#FB923C" />
                                </Border.GestureRecognizers>
                            </Border>
                        </HorizontalStackLayout>
                        <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*" ColumnSpacing="10">
                            <Label Grid.Column="0" Text="í˜„ìž¬:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" />
                            <Frame Grid.Column="1" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="#60A5FA" />
                            <Label Grid.Column="2" Text="â†’ ë¯¸ë¦¬ë³´ê¸°:" Style="{StaticResource CaptionText}" TextColor="{StaticResource TextLightGray}" VerticalOptions="Center" Margin="10,0,0,0" />
                            <Frame Grid.Column="3" WidthRequest="30" HeightRequest="30" CornerRadius="6" Padding="0" HasShadow="False" BackgroundColor="{Binding CircleColor}" />
                            <Label Grid.Column="4" Text="{Binding CircleColor}" Style="{StaticResource Body2}" TextColor="{StaticResource AccentSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>

                    <!-- Circle Opacity -->
                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label 
                                Grid.Column="0"
                                Text="íˆ¬ëª…ë„"
                                Style="{StaticResource Body1}"
                                TextColor="{StaticResource TextLightGray}" />
                            <Label 
                                Grid.Column="1"
                                Text="{Binding CircleOpacity, StringFormat='{0:P0}'}"
                                Style="{StaticResource Body1}"
                                TextColor="{StaticResource PrimaryCTA}" />
                        </Grid>
                        <Slider 
                            Value="{Binding CircleOpacity}"
                            Minimum="0"
                            Maximum="1"
                            MinimumTrackColor="{StaticResource PrimaryCTA}"
                            MaximumTrackColor="{StaticResource TextTertiary}"
                            ThumbColor="{StaticResource PrimaryCTA}" />
                    </VerticalStackLayout>

                    <!-- Circle Border Width -->
                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label 
                                Grid.Column="0"
                                Text="í…Œë‘ë¦¬ ë‘ê»˜"
                                Style="{StaticResource Body1}"
                                TextColor="{StaticResource TextLightGray}" />
                            <Label 
                                Grid.Column="1"
                                Text="{Binding CircleBorderWidth, StringFormat='{0}px'}"
                                Style="{StaticResource Body1}"
                                TextColor="{StaticResource PrimaryCTA}" />
                        </Grid>
                        <Slider 
                            Value="{Binding CircleBorderWidth}"
                            Minimum="1"
                            Maximum="5"
                            MinimumTrackColor="{StaticResource PrimaryCTA}"
                            MaximumTrackColor="{StaticResource TextTertiary}"
                            ThumbColor="{StaticResource PrimaryCTA}" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons (Full Width) -->
            <Frame Grid.Row="2" Grid.Column="1" BackgroundColor="{StaticResource SurfaceDarkGray}" Padding="20" CornerRadius="12">
                <VerticalStackLayout Spacing="15">
                    <Label 
                        Text="ðŸ’¾ ì„¤ì • ê´€ë¦¬"
                        Style="{StaticResource Heading3}"
                        TextColor="{StaticResource TextWhite}" />
                    
                    <Button 
                        Text="ì„¤ì • ì €ìž¥"
                        Command="{Binding SaveSettingsCommand}"
                        BackgroundColor="{StaticResource PrimaryCTA}"
                        TextColor="{StaticResource TextWhite}"
                        CornerRadius="8"
                        Padding="20,15"
                        FontSize="16"
                        FontAttributes="Bold" />
                    
                    <Button 
                        Text="ì´ˆê¸°í™”"
                        Command="{Binding ResetSettingsCommand}"
                        BackgroundColor="{StaticResource SurfaceDarkNavy}"
                        TextColor="{StaticResource TextLightGray}"
                        BorderColor="{StaticResource TextTertiary}"
                        BorderWidth="1"
                        CornerRadius="8"
                        Padding="20,15"
                        FontSize="16" />
                </VerticalStackLayout>
            </Frame>

        </Grid>
    </ScrollView>

</ContentPage>
